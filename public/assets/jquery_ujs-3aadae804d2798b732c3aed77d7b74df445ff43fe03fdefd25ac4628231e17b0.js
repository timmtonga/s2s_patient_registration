!function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,o=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,o){var r=e.Event(n);return t.trigger(r,o),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&e.data("remote")!==!1},handleRemote:function(o){var r,a,i,s,u,l;if(n.fire(o,"ajax:before")){if(s=o.data("with-credentials")||null,u=o.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,o.is("form")){r=o.attr("method"),a=o.attr("action"),i=o.serializeArray();var c=o.data("ujs:submit-button");c&&(i.push(c),o.data("ujs:submit-button",null))}else o.is(n.inputChangeSelector)?(r=o.data("method"),a=o.data("url"),i=o.serialize(),o.data("params")&&(i=i+"&"+o.data("params"))):o.is(n.buttonClickSelector)?(r=o.data("method")||"get",a=o.data("url"),i=o.serialize(),o.data("params")&&(i=i+"&"+o.data("params"))):(r=o.data("method"),a=n.href(o),i=o.data("params")||null);return l={type:r||"GET",data:i,dataType:u,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(o,"ajax:beforeSend",[e,r])?void o.trigger("ajax:send",e):!1},success:function(e,t,n){o.trigger("ajax:success",[e,t,n])},complete:function(e,t){o.trigger("ajax:complete",[e,t])},error:function(e,t,n){o.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(a)},s&&(l.xhrFields={withCredentials:s}),a&&(l.url=a),n.ajax(l)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(o){return!0}},handleMethod:function(o){var r=n.href(o),a=o.data("method"),i=o.attr("target"),s=n.csrfToken(),u=n.csrfParam(),l=e('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';u===t||s===t||n.isCrossDomain(r)||(c+='<input name="'+u+'" value="'+s+'" type="hidden" />'),i&&l.attr("target",i),l.hide().append(c).appendTo("body"),l.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,o;n=e.is("button")?"html":"val",o=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),o!==t&&e[n](o),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";"undefined"!=typeof e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,o=e.data("confirm"),r=!1;if(!o)return!0;if(n.fire(e,"confirm")){try{r=n.confirm(o)}catch(a){(console.error||console.log).call(console,a.stack||a)}t=n.fire(e,"confirm:complete",[r])}return r&&t},blankInputs:function(t,n,o){var r,a,i=e(),s=n||"input,textarea",u=t.find(s);return u.each(function(){if(r=e(this),a=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val(),a===o){if(r.is("input[type=radio]")&&u.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;i=i.add(r)}}),i.length?i:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var o=e.data("disable-with");e.data("ujs:enable-with",e.html()),o!==t&&e.html(o),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(o,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,o){e.crossDomain||n.CSRFProtection(o)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableElement(t)})}),o.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),o.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),o.delegate(n.linkClickSelector,"click.rails",function(t){var o=e(this),r=o.data("method"),a=o.data("params"),i=t.metaKey||t.ctrlKey;if(!n.allowAction(o))return n.stopEverything(t);if(!i&&o.is(n.linkDisableSelector)&&n.disableElement(o),n.isRemote(o)){if(i&&(!r||"GET"===r)&&!a)return!0;var s=n.handleRemote(o);return s===!1?n.enableElement(o):s.fail(function(){n.enableElement(o)}),!1}return r?(n.handleMethod(o),!1):void 0}),o.delegate(n.buttonClickSelector,"click.rails",function(t){var o=e(this);if(!n.allowAction(o)||!n.isRemote(o))return n.stopEverything(t);o.is(n.buttonDisableSelector)&&n.disableFormElement(o);var r=n.handleRemote(o);return r===!1?n.enableFormElement(o):r.fail(function(){n.enableFormElement(o)}),!1}),o.delegate(n.inputChangeSelector,"change.rails",function(t){var o=e(this);return n.allowAction(o)&&n.isRemote(o)?(n.handleRemote(o),!1):n.stopEverything(t)}),o.delegate(n.formSubmitSelector,"submit.rails",function(o){var r,a,i=e(this),s=n.isRemote(i);if(!n.allowAction(i))return n.stopEverything(o);if(i.attr("novalidate")===t&&(r=n.blankInputs(i,n.requiredInputSelector,!1),r&&n.fire(i,"ajax:aborted:required",[r])))return n.stopEverything(o);if(s){if(a=n.nonBlankInputs(i,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(i)},13);var u=n.fire(i,"ajax:aborted:file",[a]);return u||setTimeout(function(){n.enableFormElements(i)},13),u}return n.handleRemote(i),!1}setTimeout(function(){n.disableFormElements(i)},13)}),o.delegate(n.formInputClickSelector,"click.rails",function(t){var o=e(this);if(!n.allowAction(o))return n.stopEverything(t);var r=o.attr("name"),a=r?{name:r,value:o.val()}:null;o.closest("form").data("ujs:submit-button",a)}),o.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this===t.target&&n.disableFormElements(e(this))}),o.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery);